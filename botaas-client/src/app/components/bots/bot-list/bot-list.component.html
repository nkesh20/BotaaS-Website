<div class="bot-list-container">
    <!-- Header -->
    <div class="header">
        <h1>{{ 'bots.myBots' | translate }}</h1>
        <button mat-raised-button color="primary" (click)="addNewBot()">
            <mat-icon>add</mat-icon>
            {{ 'bots.addBot' | translate }}
        </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
        <mat-spinner></mat-spinner>
        <p>{{ 'common.loading' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ error }}</p>
        <button mat-button color="primary" (click)="loadBots()">{{ 'common.tryAgain' | translate }}</button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !error && bots.length === 0" class="empty-state">
        <mat-icon>smart_toy</mat-icon>
        <h2>{{ 'bots.noBots' | translate }}</h2>
        <p>{{ 'bots.createFirstBot' | translate }}</p>
        <button mat-raised-button color="primary" (click)="addNewBot()">
            <mat-icon>add</mat-icon>
            {{ 'bots.addBot' | translate }}
        </button>
    </div>

    <!-- Bot Cards with Enhanced Layout -->
    <div *ngIf="!loading && !error && bots.length > 0" class="bots-grid">
        <div *ngFor="let bot of bots" class="bot-container">
            
            <!-- Bot Cards Wrapper -->
            <div class="bot-card-wrapper">
                <!-- Main Bot Info Card -->
                <mat-card class="bot-card">
                    <mat-card-header>
                        <div mat-card-avatar class="bot-avatar">
                            <mat-icon>smart_toy</mat-icon>
                        </div>
                        <mat-card-title>{{ bot.first_name }}</mat-card-title>
                        <mat-card-subtitle>{{ bot.username }}</mat-card-subtitle>

                        <!-- Menu Button -->
                        <button mat-icon-button [matMenuTriggerFor]="botMenu" class="menu-button">
                            <mat-icon>more_vert</mat-icon>
                        </button>

                        <!-- Bot Menu -->
                        <mat-menu #botMenu="matMenu">
                            <button mat-menu-item (click)="editBot(bot)">
                                <mat-icon>edit</mat-icon>
                                <span>{{ 'bots.editBot' | translate }}</span>
                            </button>
                            <button mat-menu-item (click)="manageFlows(bot)">
                                <mat-icon>account_tree</mat-icon>
                                <span>{{ 'bots.botFlows' | translate }}</span>
                            </button>
                            <button mat-menu-item (click)="toggleBotStatus(bot)">
                                <mat-icon>{{ bot.is_active ? 'pause' : 'play_arrow' }}</mat-icon>
                                <span>{{ bot.is_active ? ('common.deactivate' | translate) : ('common.activate' | translate) }}</span>
                            </button>
                            <button mat-menu-item (click)="deleteBot(bot)" class="delete-item">
                                <mat-icon>delete</mat-icon>
                                <span>{{ 'bots.deleteBot' | translate }}</span>
                            </button>
                        </mat-menu>
                    </mat-card-header>

                    <mat-card-content>
                        <!-- Description section -->
                        <div *ngIf="bot.short_description" class="bot-description">
                            <p>{{ bot.short_description }}</p>
                        </div>

                        <!-- Status Chips -->
                        <div class="status-chips">
                            <mat-chip-listbox>
                                <mat-chip [color]="bot.is_active ? 'primary' : 'warn'" selected>
                                    {{ bot.is_active ? ('common.active' | translate) : ('common.inactive' | translate) }}
                                </mat-chip>
                                <mat-chip *ngIf="bot.can_join_groups" color="accent" selected>
                                    {{ 'bots.groups' | translate }}
                                </mat-chip>
                                <mat-chip *ngIf="bot.supports_inline_queries" color="accent" selected>
                                    {{ 'bots.inline' | translate }}
                                </mat-chip>
                            </mat-chip-listbox>
                        </div>
                    </mat-card-content>

                    <mat-card-actions>
                        <button mat-button (click)="manageFlows(bot)" color="primary">
                            <mat-icon>account_tree</mat-icon>
                            {{ 'bots.botFlows' | translate }}
                        </button>
                        <button mat-button (click)="toggleBotStatus(bot)" [color]="bot.is_active ? 'warn' : 'primary'">
                            <mat-icon>{{ bot.is_active ? 'pause' : 'play_arrow' }}</mat-icon>
                            {{ bot.is_active ? ('common.deactivate' | translate) : ('common.activate' | translate) }}
                        </button>
                        <button mat-button (click)="onAnalytics(bot)">
                            <mat-icon>insights</mat-icon>
                            {{ 'bots.botAnalytics' | translate }}
                        </button>
                        <button mat-button (click)="editBot(bot)">
                            <mat-icon>settings</mat-icon>
                            {{ 'bots.botSettings' | translate }}
                        </button>
                    </mat-card-actions>
                </mat-card>

                <!-- Bot Status Component - This is where your status component goes -->
                <app-bot-status [bot]="bot"></app-bot-status>
            </div>

        </div>
    </div>
</div>